extends layout
block head 
    link(rel="stylesheet", href="../style/index.css")
                    
         
    
block content
    h2 #{user._id}
    .container
        br
        .postCard
            a(href='/post')
                input(type='text', name='', placeholder=`What is on your mind, ${user.name}? ` )
        hr
        -posts.reverse()
        p #{posts[0]}
        br
       
        -for(var i=0;i<posts.length;i++){
            .postContainer
                .top
                    a(href=`/profile/${posts[i].user_id}`)
                        span #{posts[i].name} 
                    br
                    span.text-muted  #{posts[i].date}
                .body
                    p #{posts[i].status}
                    img(src=`/image/${posts[i].image}`, alt='')
                .bottom
                    -let show=0
                    -if(posts[i].likes.length){
                        -let t=0
                        -show=1
                        -for(let j=0;j<posts[i].likes.length;j++){
                            -if(JSON.stringify(posts[i].likes[j])===JSON.stringify(user._id)){
                                    a.btn(href=`/unlike/${posts[i]._id}`) #{posts[i].likes.length} Likes Unlike 
                                    
                            -}
                            -else{
                                -t+=1
                            -}
                            -if(t===posts[i].likes.length){
                                    a.btn(href=`/like/${posts[i]._id}`) #{posts[i].likes.length} Likes Like 
                            -}
                        -}
                    -}
                    -if(!posts[i].likes.length){
                            a.btn(href=`/like/${posts[i]._id}`) Like 
                    -}
                        a.btn(href='#') Comment  #{posts[i].likes.length}
            br

        -}
    script(src="../scripts/index.js")