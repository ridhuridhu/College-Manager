extends layout 

block head  
    title #{profile.name}
    link(rel="stylesheet", href="../style/index.css")
    link(rel="stylesheet", href="../style/profile.css")
    script(src="../scripts/profile.js")
block content
    hr
    h1.text-center #{profile.name}
    .postContainer
        form(action='/attendance/addSubject', method='POST')
            .form-group
                label(for='') Add Subject
                input.form-control(type='text', name='name', id='', placeholder='')
                input.btn.btn-success(type='submit',id='addSubject' value='Add')
    hr
    p #{attendance[0]._id} #{attendance.length}

    if(attendance)
        .attendanceBox
            -for(var k=0;k<attendance.length;k++){
                .card
                    h4.card-title #{attendance[k].name}
                        span
                           a.btn.btn-danger(href="/attendance/delete/"+attendance[k]._id) X
                    -if(JSON.parse(attendance[k].percentage)>=0.75){
                        h2.alert.alert-success Status: Peace Podu ‚úåüèª
                    -}
                    -if(JSON.parse(attendance[k].percentage)<0.75){
                        h2.alert.alert-danger  Status: No Peace üèÉüèª‚Äç‚ôÇÔ∏è
                    -}
                   
                    .card-body
                        p Total Classes  : #{attendance[k].total}
                        p Present : #{attendance[k].present}
                        p Absent :#{attendance[k].absent}
                    .card-footer
                        a.btn.btn-success(href=`/attendance/present/${attendance[k]._id}`) ‚úî
                        a.btn.btn-danger(href=`/attendance/absent/${attendance[k]._id}`) ‚ùå

            -}
            
        br

    -posts.reverse()
    hr
    h4.card-title.text-center Timeline
    -for(var i=0;i<posts.length;i++){
        .postContainer
            .top
                a(href=`/profile/${posts[i].user_id}`) #{posts[i].name} 
                br
                span.text-muted  #{posts[i].date}
            .body
                p #{posts[i].status}
                img(src=`/image/${posts[i].image}`, alt='')
            .bottom.row
                -let show=0
                -if(posts[i].likes.length){
                    -let t=0
                    -for(let j=0;j<posts[i].likes.length;j++){
                        -if(JSON.stringify(posts[i].likes[j])===JSON.stringify(user._id)){
                                a.btn.col(href=`/unlike/${posts[i]._id}`) 
                                    p #{posts[i].likes.length}  &nbsp;
                                        i.fa.fa-thumbs-up(aria-hidden='true')
                                
                        -}
                        -else{
                            -t+=1
                        -}
                        -if(t===posts[i].likes.length){
                                a.btn.col(href=`/like/${posts[i]._id}`) 
                                    p   #{posts[i].likes.length}  &nbsp;
                                        i.fa.fa-thumbs-o-up(aria-hidden='true')
                        -}
                    -}
                -}
                -if(!posts[i].likes.length){
                        a.btn.col(href=`/like/${posts[i]._id}`) 
                            p   0 &nbsp;
                                i.fa.fa-thumbs-o-up(aria-hidden='true')
                -}
                    a.btn.col(href='#') 
                        p Comments  &nbsp;
                            i.fa.fa-comments(aria-hidden='true')
        
                            
        br
    -}
